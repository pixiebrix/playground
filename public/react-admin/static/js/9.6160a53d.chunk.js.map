{"version":3,"sources":["../../../packages/ra-core/esm/dataProvider/HttpError.js","../../../packages/ra-data-graphql/esm/introspection.js","../../../packages/ra-data-graphql/esm/index.js","../../../packages/ra-data-graphql/esm/buildApolloClient.js","../../../packages/ra-data-graphql/esm/constants.js","../../../packages/ra-data-graphql-simple/esm/getFinalType.js","../../../packages/ra-data-graphql-simple/esm/isList.js","../../../packages/ra-data-graphql-simple/esm/buildVariables.js","../../../packages/ra-data-graphql-simple/esm/isRequired.js","../../../packages/ra-data-graphql-simple/esm/buildGqlQuery.js","../../../packages/ra-data-graphql-simple/esm/getResponseParser.js","../../../packages/ra-data-graphql-simple/esm/buildQuery.js","../../../packages/ra-data-graphql-simple/esm/index.js","dataProvider/graphql.ts"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","this","constructor","create","HttpError","_super","message","status","body","_this","name","Error","captureStackTrace","stack","introspectionPromise","templateObject_1","_a","__assign","assign","t","s","i","n","arguments","length","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","QUERY_TYPES","GET_LIST","GET_MANY","GET_MANY_REFERENCE","GET_ONE","MUTATION_TYPES","CREATE","UPDATE","DELETE","UPDATE_MANY","DELETE_MANY","ALL_TYPES","concat","__makeTemplateObject","cooked","raw","defineProperty","value","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","adopt","then","__generator","f","y","g","_","label","sent","trys","ops","verb","Symbol","iterator","v","op","pop","push","__spreadArray","to","from","pack","ar","l","slice","runSchemaIntrospection","client","options","schema","queries","types","resources","_b","fetchSchema","getQueriesFromSchema","getTypesFromSchema","getResources","query","fetchPolicy","gql","getIntrospectionQuery","data","__schema","reduce","acc","type","queryType","mutationType","fields","filter","isResource","map","buildResource","isResourceIncluded","isResourceExcluded","keys","operationNames","operation","some","find","include","isArray","includes","exclude","raFetchMethod","INNER_QUERY_TYPES","RaFetchMethodMap","getList","getMany","getManyReference","getOne","delete","deleteMany","update","updateMany","defaultOptions","resolveIntrospection","introspectSchema","introspection","resource","pluralize","undefined","getOptions","clientObject","clientOptions","buildQueryFactory","override","otherOptions","introspectionResults","_c","merge","buildQuery","console","warn","ApolloClient","cache","InMemoryCache","restore","uri","link","HttpLink","buildApolloClient","Proxy","defaultDataProvider","get","target","params","overriddenBuildQuery","parseResponse","apolloQuery_1","apolloQuery","getQueryOperation","response","catch","handleError","mutation","variables","mutate","error","networkError","statusCode","definitions","total","getFinalType","kind","TypeKind","NON_NULL","LIST","ofType","isList","preparedParams","prepareParams","buildGetListVariables","ids","id","buildCreateUpdateVariables","sanitizeValue","parseInt","parseFloat","forEach","key","param","arg","args","item","File","Date","toISOString","inputFields","castType","realType","Number","Boolean","_d","_e","_f","_g","_h","_j","_k","_l","filterSome","k","parts","split","resourceField_1","resourceField","type_2","isAList","pagination","page","perPage","sort","sortField","field","sortOrder","order","a","isRequired","metaVariables","apolloArgs","buildApolloArgs","buildArgs","metaArgs","buildFields","gqlTypes","paths","startsWith","OBJECT","INTERFACE","r","linkedType","possibleTypes","buildFragments","possibleType","validVariables","getArgType","required","items","sanitizeResource","count","dataForKey","__typename","buildVariablesImpl","buildGqlQueryImpl","getResponseParserImpl","buildVariables","buildGqlQuery","getResponseParser","knownResources","raFetchType","resourceName","join","defaultBuildQuery","getGqlResource","customBuildQuery","buildDataProvider","otherParams","all","previousData","results","dataProvider"],"mappings":"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","file":"static/js/9.6160a53d.chunk.js","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar HttpError = /** @class */ (function (_super) {\n    __extends(HttpError, _super);\n    function HttpError(message, status, body) {\n        if (body === void 0) { body = null; }\n        var _this = _super.call(this, message) || this;\n        _this.message = message;\n        _this.status = status;\n        _this.body = body;\n        Object.setPrototypeOf(_this, HttpError.prototype);\n        _this.name = _this.constructor.name;\n        if (typeof Error.captureStackTrace === 'function') {\n            Error.captureStackTrace(_this, _this.constructor);\n        }\n        else {\n            _this.stack = new Error(message).stack;\n        }\n        _this.stack = new Error().stack;\n        return _this;\n    }\n    return HttpError;\n}(Error));\nexport default HttpError;\n","var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { getIntrospectionQuery, } from 'graphql';\nimport { gql } from '@apollo/client';\nimport { ALL_TYPES } from './constants';\nvar introspectionPromise;\n/**\n * @param {ApolloClient} client The Apollo client\n * @param {Object} options The introspection options\n */\nexport var introspectSchema = function (client, options) { return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n        if (introspectionPromise) {\n            return [2 /*return*/, introspectionPromise];\n        }\n        introspectionPromise = runSchemaIntrospection(client, options);\n        return [2 /*return*/, introspectionPromise];\n    });\n}); };\nvar runSchemaIntrospection = function (client, options) { return __awaiter(void 0, void 0, void 0, function () {\n    var schema, _a, queries, types, resources;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                if (!options.schema) return [3 /*break*/, 1];\n                _a = options.schema;\n                return [3 /*break*/, 3];\n            case 1: return [4 /*yield*/, fetchSchema(client)];\n            case 2:\n                _a = _b.sent();\n                _b.label = 3;\n            case 3:\n                schema = _a;\n                queries = getQueriesFromSchema(schema);\n                types = getTypesFromSchema(schema);\n                resources = getResources(types, queries, options);\n                return [2 /*return*/, {\n                        types: types,\n                        queries: queries,\n                        resources: resources,\n                        schema: schema,\n                    }];\n        }\n    });\n}); };\nvar fetchSchema = function (client) {\n    return client\n        .query({\n        fetchPolicy: 'network-only',\n        query: gql(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n                \", \"\\n            \"], [\"\\n                \", \"\\n            \"])), getIntrospectionQuery()),\n    })\n        .then(function (_a) {\n        var __schema = _a.data.__schema;\n        return __schema;\n    });\n};\nvar getQueriesFromSchema = function (schema) {\n    return schema.types.reduce(function (acc, type) {\n        var _a, _b;\n        if (type.name !== ((_a = schema.queryType) === null || _a === void 0 ? void 0 : _a.name) &&\n            type.name !== ((_b = schema.mutationType) === null || _b === void 0 ? void 0 : _b.name) &&\n            type.fields) {\n            return acc;\n        }\n        return __spreadArray(__spreadArray([], acc, true), (type.fields || []), true);\n    }, []);\n};\nvar getTypesFromSchema = function (schema) {\n    return schema.types.filter(function (type) {\n        return type.name !== (schema.queryType && schema.queryType.name) &&\n            type.name !== (schema.mutationType && schema.mutationType.name);\n    });\n};\nvar getResources = function (types, queries, options) {\n    var filteredResources = types.filter(function (type) {\n        return isResource(type, queries, options);\n    });\n    return filteredResources.map(function (type) {\n        return buildResource(type, queries, options);\n    });\n};\nvar isResource = function (type, queries, options) {\n    if (isResourceIncluded(type, options))\n        return true;\n    if (isResourceExcluded(type, options))\n        return false;\n    var operations = Object.keys(options.operationNames).map(function (operation) {\n        return options.operationNames[operation](type);\n    });\n    var hasAtLeastOneOperation = operations.some(function (operation) {\n        return queries.find(function (_a) {\n            var name = _a.name;\n            return name === operation;\n        });\n    });\n    return hasAtLeastOneOperation;\n};\nexport var isResourceIncluded = function (type, _a) {\n    var _b = _a === void 0 ? {} : _a, include = _b.include;\n    if (Array.isArray(include)) {\n        return include.includes(type.name);\n    }\n    if (typeof include === 'function') {\n        return include(type);\n    }\n    return false;\n};\nexport var isResourceExcluded = function (type, _a) {\n    var _b = _a === void 0 ? {} : _a, exclude = _b.exclude;\n    if (Array.isArray(exclude)) {\n        return exclude.includes(type.name);\n    }\n    if (typeof exclude === 'function') {\n        return exclude(type);\n    }\n    return false;\n};\nvar buildResource = function (type, queries, options) {\n    return ALL_TYPES.reduce(function (acc, raFetchMethod) {\n        var _a;\n        var query = queries.find(function (_a) {\n            var name = _a.name;\n            return options.operationNames[raFetchMethod] &&\n                name === options.operationNames[raFetchMethod](type);\n        });\n        if (!query)\n            return acc;\n        return __assign(__assign({}, acc), (_a = {}, _a[raFetchMethod] = query, _a));\n    }, { type: type });\n};\nvar templateObject_1;\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar _a;\nimport merge from 'lodash/merge';\nimport get from 'lodash/get';\nimport pluralize from 'pluralize';\nimport { HttpError, GET_LIST, GET_ONE, GET_MANY, GET_MANY_REFERENCE, CREATE, UPDATE, DELETE, DELETE_MANY, UPDATE_MANY, } from 'ra-core';\nimport buildApolloClient from './buildApolloClient';\nimport { QUERY_TYPES as INNER_QUERY_TYPES, MUTATION_TYPES as INNER_MUTATION_TYPES, ALL_TYPES as INNER_ALL_TYPES, } from './constants';\nimport { introspectSchema, } from './introspection';\nexport * from './introspection';\nexport var QUERY_TYPES = INNER_QUERY_TYPES;\nexport var MUTATION_TYPES = INNER_MUTATION_TYPES;\nexport var ALL_TYPES = INNER_ALL_TYPES;\nvar RaFetchMethodMap = {\n    getList: GET_LIST,\n    getMany: GET_MANY,\n    getManyReference: GET_MANY_REFERENCE,\n    getOne: GET_ONE,\n    create: CREATE,\n    delete: DELETE,\n    deleteMany: DELETE_MANY,\n    update: UPDATE,\n    updateMany: UPDATE_MANY,\n};\nvar defaultOptions = {\n    resolveIntrospection: introspectSchema,\n    introspection: {\n        operationNames: (_a = {},\n            _a[GET_LIST] = function (resource) { return \"all\" + pluralize(resource.name); },\n            _a[GET_ONE] = function (resource) { return \"\" + resource.name; },\n            _a[GET_MANY] = function (resource) { return \"all\" + pluralize(resource.name); },\n            _a[GET_MANY_REFERENCE] = function (resource) { return \"all\" + pluralize(resource.name); },\n            _a[CREATE] = function (resource) { return \"create\" + resource.name; },\n            _a[UPDATE] = function (resource) { return \"update\" + resource.name; },\n            _a[DELETE] = function (resource) { return \"delete\" + resource.name; },\n            _a),\n        exclude: undefined,\n        include: undefined,\n    },\n};\nvar getOptions = function (options, raFetchMethod, resource) {\n    if (typeof options === 'function') {\n        return options(resource, raFetchMethod);\n    }\n    return options;\n};\nexport default (function (options) { return __awaiter(void 0, void 0, void 0, function () {\n    var _a, clientObject, clientOptions, introspection, resolveIntrospection, buildQueryFactory, _b, override, otherOptions, client, introspectionResults, raDataProvider;\n    return __generator(this, function (_c) {\n        _a = merge({}, defaultOptions, options), clientObject = _a.client, clientOptions = _a.clientOptions, introspection = _a.introspection, resolveIntrospection = _a.resolveIntrospection, buildQueryFactory = _a.buildQuery, _b = _a.override, override = _b === void 0 ? {} : _b, otherOptions = __rest(_a, [\"client\", \"clientOptions\", \"introspection\", \"resolveIntrospection\", \"buildQuery\", \"override\"]);\n        if (override && process.env.NODE_ENV === 'production') {\n            console.warn(\n            // eslint-disable-line\n            'The override option is deprecated. You should instead wrap the buildQuery function provided by the dataProvider you use.');\n        }\n        client = clientObject || buildApolloClient(clientOptions);\n        raDataProvider = new Proxy(defaultDataProvider, {\n            get: function (target, name) {\n                if (typeof name === 'symbol' || name === 'then') {\n                    return;\n                }\n                var raFetchMethod = RaFetchMethodMap[name];\n                return function (resource, params) { return __awaiter(void 0, void 0, void 0, function () {\n                    var buildQuery, overriddenBuildQuery, _a, parseResponse, query, operation, apolloQuery_1, apolloQuery;\n                    return __generator(this, function (_b) {\n                        switch (_b.label) {\n                            case 0:\n                                if (!introspection) return [3 /*break*/, 2];\n                                return [4 /*yield*/, resolveIntrospection(client, introspection)];\n                            case 1:\n                                introspectionResults = _b.sent();\n                                _b.label = 2;\n                            case 2:\n                                buildQuery = buildQueryFactory(introspectionResults);\n                                overriddenBuildQuery = get(override, resource + \".\" + raFetchMethod);\n                                _a = overriddenBuildQuery\n                                    ? __assign(__assign({}, buildQuery(raFetchMethod, resource, params)), overriddenBuildQuery(params)) : buildQuery(raFetchMethod, resource, params), parseResponse = _a.parseResponse, query = __rest(_a, [\"parseResponse\"]);\n                                operation = getQueryOperation(query.query);\n                                if (operation === 'query') {\n                                    apolloQuery_1 = __assign(__assign(__assign({}, query), { fetchPolicy: 'network-only' }), getOptions(otherOptions.query, raFetchMethod, resource));\n                                    return [2 /*return*/, (client\n                                            // @ts-ignore\n                                            .query(apolloQuery_1)\n                                            .then(function (response) { return parseResponse(response); })\n                                            .catch(handleError))];\n                                }\n                                apolloQuery = __assign({ mutation: query.query, variables: query.variables }, getOptions(otherOptions.mutation, raFetchMethod, resource));\n                                return [2 /*return*/, (client\n                                        // @ts-ignore\n                                        .mutate(apolloQuery)\n                                        .then(parseResponse)\n                                        .catch(handleError))];\n                        }\n                    });\n                }); };\n            },\n        });\n        return [2 /*return*/, raDataProvider];\n    });\n}); });\nvar handleError = function (error) {\n    var _a, _b;\n    console.error({ error: error });\n    if (error === null || error === void 0 ? void 0 : error.networkError) {\n        throw new HttpError((_a = error === null || error === void 0 ? void 0 : error.networkError) === null || _a === void 0 ? void 0 : _a.message, (_b = error === null || error === void 0 ? void 0 : error.networkError) === null || _b === void 0 ? void 0 : _b.statusCode);\n    }\n    throw new HttpError(error.message, 200);\n};\nvar getQueryOperation = function (query) {\n    if (query && query.definitions && query.definitions.length > 0) {\n        return query.definitions[0].operation;\n    }\n    throw new Error('Unable to determine the query operation');\n};\n// Only used to initialize proxy\nvar defaultDataProvider = {\n    create: function () { return Promise.resolve({ data: null }); },\n    delete: function () { return Promise.resolve({ data: null }); },\n    deleteMany: function () { return Promise.resolve({ data: [] }); },\n    getList: function () { return Promise.resolve({ data: [], total: 0 }); },\n    getMany: function () { return Promise.resolve({ data: [] }); },\n    getManyReference: function () { return Promise.resolve({ data: [], total: 0 }); },\n    getOne: function () { return Promise.resolve({ data: null }); },\n    update: function () { return Promise.resolve({ data: null }); },\n    updateMany: function () { return Promise.resolve({ data: [] }); }, // avoids adding a context in tests\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ApolloClient, HttpLink, InMemoryCache, } from '@apollo/client';\nexport default (function (options) {\n    if (!options) {\n        return new ApolloClient({\n            cache: new InMemoryCache().restore({}),\n        });\n    }\n    var _a = options.cache, cache = _a === void 0 ? new InMemoryCache().restore({}) : _a, uri = options.uri, _b = options.link, link = _b === void 0 ? !!uri ? new HttpLink({ uri: uri }) : undefined : _b, otherOptions = __rest(options, [\"cache\", \"uri\", \"link\"]);\n    return new ApolloClient(__assign({ link: link, cache: cache }, otherOptions));\n});\n","import { GET_LIST, GET_ONE, GET_MANY, GET_MANY_REFERENCE, CREATE, UPDATE, UPDATE_MANY, DELETE, DELETE_MANY, } from 'ra-core';\nexport var QUERY_TYPES = [GET_LIST, GET_MANY, GET_MANY_REFERENCE, GET_ONE];\nexport var MUTATION_TYPES = [\n    CREATE,\n    UPDATE,\n    DELETE,\n    UPDATE_MANY,\n    DELETE_MANY,\n];\nexport var ALL_TYPES = QUERY_TYPES.concat(MUTATION_TYPES);\n","import { TypeKind, } from 'graphql';\n/**\n * Ensure we get the real type even if the root type is NON_NULL or LIST\n * @param {GraphQLType} type\n */\nvar getFinalType = function (type) {\n    if (type.kind === TypeKind.NON_NULL || type.kind === TypeKind.LIST) {\n        return getFinalType(type.ofType);\n    }\n    return type;\n};\nexport default getFinalType;\n","import { TypeKind, } from 'graphql';\nvar isList = function (type) {\n    if (type.kind === TypeKind.NON_NULL) {\n        return isList(type.ofType);\n    }\n    return type.kind === TypeKind.LIST;\n};\nexport default isList;\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { GET_LIST, GET_ONE, GET_MANY, GET_MANY_REFERENCE, CREATE, UPDATE, DELETE, } from 'ra-core';\nimport getFinalType from './getFinalType';\nimport isList from './isList';\nexport default (function (introspectionResults) { return function (resource, raFetchMethod, params, queryType) {\n    var _a;\n    var preparedParams = prepareParams(params, queryType, introspectionResults);\n    switch (raFetchMethod) {\n        case GET_LIST: {\n            return buildGetListVariables(introspectionResults)(resource, raFetchMethod, preparedParams);\n        }\n        case GET_MANY:\n            return {\n                filter: { ids: preparedParams.ids },\n            };\n        case GET_MANY_REFERENCE: {\n            var variables = buildGetListVariables(introspectionResults)(resource, raFetchMethod, preparedParams);\n            variables.filter = __assign(__assign({}, variables.filter), (_a = {}, _a[preparedParams.target] = preparedParams.id, _a));\n            return variables;\n        }\n        case GET_ONE:\n        case DELETE:\n            return {\n                id: preparedParams.id,\n            };\n        case CREATE:\n        case UPDATE: {\n            return buildCreateUpdateVariables(resource, raFetchMethod, preparedParams, queryType);\n        }\n    }\n}; });\nvar sanitizeValue = function (type, value) {\n    if (type.name === 'Int') {\n        return parseInt(value, 10);\n    }\n    if (type.name === 'Float') {\n        return parseFloat(value);\n    }\n    return value;\n};\nvar castType = function (value, type) {\n    var realType = type.kind === 'NON_NULL' ? type.ofType : type;\n    switch (realType.kind + \":\" + realType.name) {\n        case 'SCALAR:Int':\n            return Number(value);\n        case 'SCALAR:String':\n            return String(value);\n        case 'SCALAR:Boolean':\n            return Boolean(value);\n        default:\n            return value;\n    }\n};\nvar prepareParams = function (params, queryType, introspectionResults) {\n    var result = {};\n    if (!params) {\n        return params;\n    }\n    Object.keys(params).forEach(function (key) {\n        var param = params[key];\n        var arg = null;\n        if (!param) {\n            result[key] = param;\n            return;\n        }\n        if (queryType && Array.isArray(queryType.args)) {\n            arg = queryType.args.find(function (item) { return item.name === key; });\n        }\n        if (param instanceof File) {\n            result[key] = param;\n            return;\n        }\n        if (param instanceof Date) {\n            result[key] = param.toISOString();\n            return;\n        }\n        if (param instanceof Object &&\n            !Array.isArray(param) &&\n            arg &&\n            arg.type.kind === 'INPUT_OBJECT') {\n            var args = introspectionResults.types.find(function (item) {\n                return item.kind === arg.type.kind && item.name === arg.type.name;\n            }).inputFields;\n            result[key] = prepareParams(param, { args: args }, introspectionResults);\n            return;\n        }\n        if (param instanceof Object &&\n            !(param instanceof Date) &&\n            !Array.isArray(param)) {\n            result[key] = prepareParams(param, queryType, introspectionResults);\n            return;\n        }\n        if (!arg) {\n            result[key] = param;\n            return;\n        }\n        result[key] = castType(param, arg.type);\n    });\n    return result;\n};\nvar buildGetListVariables = function (introspectionResults) { return function (resource, raFetchMethod, params) {\n    var variables = { filter: {} };\n    if (params.filter) {\n        variables.filter = Object.keys(params.filter).reduce(function (acc, key) {\n            var _a, _b, _c, _d, _e, _f, _g;\n            var _h, _j, _k, _l;\n            if (key === 'ids') {\n                return __assign(__assign({}, acc), { ids: params.filter[key] });\n            }\n            if (typeof params.filter[key] === 'object') {\n                var type = introspectionResults.types.find(function (t) { return t.name === resource.type.name + \"Filter\"; });\n                var filterSome = (_j = (_h = type) === null || _h === void 0 ? void 0 : _h.inputFields) === null || _j === void 0 ? void 0 : _j.find(function (t) { return t.name === key + \"_some\"; });\n                if (filterSome) {\n                    var filter = Object.keys(params.filter[key]).reduce(function (acc, k) {\n                        var _a;\n                        return (__assign(__assign({}, acc), (_a = {}, _a[k + \"_in\"] = params.filter[key][k], _a)));\n                    }, {});\n                    return __assign(__assign({}, acc), (_a = {}, _a[key + \"_some\"] = filter, _a));\n                }\n            }\n            var parts = key.split('.');\n            if (parts.length > 1) {\n                if (parts[1] === 'id') {\n                    var type_1 = introspectionResults.types.find(function (t) { return t.name === resource.type.name + \"Filter\"; });\n                    var filterSome = (_l = (_k = type_1) === null || _k === void 0 ? void 0 : _k.inputFields) === null || _l === void 0 ? void 0 : _l.find(function (t) { return t.name === parts[0] + \"_some\"; });\n                    if (filterSome) {\n                        return __assign(__assign({}, acc), (_b = {}, _b[parts[0] + \"_some\"] = { id: params.filter[key] }, _b));\n                    }\n                    return __assign(__assign({}, acc), (_c = {}, _c[parts[0]] = { id: params.filter[key] }, _c));\n                }\n                var resourceField_1 = resource.type.fields.find(function (f) { return f.name === parts[0]; });\n                var type = getFinalType(resourceField_1.type);\n                return __assign(__assign({}, acc), (_d = {}, _d[key] = sanitizeValue(type, params.filter[key]), _d));\n            }\n            var resourceField = resource.type.fields.find(function (f) { return f.name === key; });\n            if (resourceField) {\n                var type_2 = getFinalType(resourceField.type);\n                var isAList = isList(resourceField.type);\n                if (isAList) {\n                    return __assign(__assign({}, acc), (_e = {}, _e[key] = Array.isArray(params.filter[key])\n                        ? params.filter[key].map(function (value) {\n                            return sanitizeValue(type_2, value);\n                        })\n                        : sanitizeValue(type_2, [params.filter[key]]), _e));\n                }\n                return __assign(__assign({}, acc), (_f = {}, _f[key] = sanitizeValue(type_2, params.filter[key]), _f));\n            }\n            return __assign(__assign({}, acc), (_g = {}, _g[key] = params.filter[key], _g));\n        }, {});\n    }\n    if (params.pagination) {\n        variables.page = parseInt(params.pagination.page, 10) - 1;\n        variables.perPage = parseInt(params.pagination.perPage, 10);\n    }\n    if (params.sort) {\n        variables.sortField = params.sort.field;\n        variables.sortOrder = params.sort.order;\n    }\n    return variables;\n}; };\nvar buildCreateUpdateVariables = function (resource, raFetchMethod, params, queryType) {\n    return Object.keys(params.data).reduce(function (acc, key) {\n        var _a, _b, _c;\n        if (Array.isArray(params.data[key])) {\n            var arg = queryType.args.find(function (a) { return a.name === key + \"Ids\"; });\n            if (arg) {\n                return __assign(__assign({}, acc), (_a = {}, _a[key + \"Ids\"] = params.data[key].map(function (_a) {\n                    var id = _a.id;\n                    return id;\n                }), _a));\n            }\n        }\n        if (typeof params.data[key] === 'object') {\n            var arg = queryType.args.find(function (a) { return a.name === key + \"Id\"; });\n            if (arg) {\n                return __assign(__assign({}, acc), (_b = {}, _b[key + \"Id\"] = params.data[key].id, _b));\n            }\n        }\n        return __assign(__assign({}, acc), (_c = {}, _c[key] = params.data[key], _c));\n    }, {});\n};\n","import { TypeKind, } from 'graphql';\nvar isRequired = function (type) {\n    if (type.kind === TypeKind.LIST) {\n        return isRequired(type.ofType);\n    }\n    return type.kind === TypeKind.NON_NULL;\n};\nexport default isRequired;\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { GET_LIST, GET_MANY, GET_MANY_REFERENCE, DELETE } from 'ra-core';\nimport { QUERY_TYPES, } from 'ra-data-graphql';\nimport { TypeKind, } from 'graphql';\nimport * as gqlTypes from 'graphql-ast-types-browser';\nimport getFinalType from './getFinalType';\nimport isList from './isList';\nimport isRequired from './isRequired';\nexport default (function (introspectionResults) { return function (resource, raFetchMethod, queryType, variables) {\n    var sortField = variables.sortField, sortOrder = variables.sortOrder, metaVariables = __rest(variables, [\"sortField\", \"sortOrder\"]);\n    var apolloArgs = buildApolloArgs(queryType, variables);\n    var args = buildArgs(queryType, variables);\n    var metaArgs = buildArgs(queryType, metaVariables);\n    var fields = buildFields(introspectionResults)(resource.type.fields);\n    if (raFetchMethod === GET_LIST ||\n        raFetchMethod === GET_MANY ||\n        raFetchMethod === GET_MANY_REFERENCE) {\n        return gqlTypes.document([\n            gqlTypes.operationDefinition('query', gqlTypes.selectionSet([\n                gqlTypes.field(gqlTypes.name(queryType.name), gqlTypes.name('items'), args, null, gqlTypes.selectionSet(fields)),\n                gqlTypes.field(gqlTypes.name(\"_\" + queryType.name + \"Meta\"), gqlTypes.name('total'), metaArgs, null, gqlTypes.selectionSet([\n                    gqlTypes.field(gqlTypes.name('count')),\n                ])),\n            ]), gqlTypes.name(queryType.name), apolloArgs),\n        ]);\n    }\n    if (raFetchMethod === DELETE) {\n        return gqlTypes.document([\n            gqlTypes.operationDefinition('mutation', gqlTypes.selectionSet([\n                gqlTypes.field(gqlTypes.name(queryType.name), gqlTypes.name('data'), args, null, gqlTypes.selectionSet(fields)),\n            ]), gqlTypes.name(queryType.name), apolloArgs),\n        ]);\n    }\n    return gqlTypes.document([\n        gqlTypes.operationDefinition(QUERY_TYPES.includes(raFetchMethod) ? 'query' : 'mutation', gqlTypes.selectionSet([\n            gqlTypes.field(gqlTypes.name(queryType.name), gqlTypes.name('data'), args, null, gqlTypes.selectionSet(fields)),\n        ]), gqlTypes.name(queryType.name), apolloArgs),\n    ]);\n}; });\nexport var buildFields = function (introspectionResults, paths) {\n    if (paths === void 0) { paths = []; }\n    return function (fields) {\n        return fields.reduce(function (acc, field) {\n            var type = getFinalType(field.type);\n            if (type.name.startsWith('_')) {\n                return acc;\n            }\n            if (type.kind !== TypeKind.OBJECT && type.kind !== TypeKind.INTERFACE) {\n                return __spreadArray(__spreadArray([], acc, true), [gqlTypes.field(gqlTypes.name(field.name))], false);\n            }\n            var linkedResource = introspectionResults.resources.find(function (r) { return r.type.name === type.name; });\n            if (linkedResource) {\n                return __spreadArray(__spreadArray([], acc, true), [\n                    gqlTypes.field(gqlTypes.name(field.name), null, null, null, gqlTypes.selectionSet([gqlTypes.field(gqlTypes.name('id'))])),\n                ], false);\n            }\n            var linkedType = introspectionResults.types.find(function (t) { return t.name === type.name; });\n            if (linkedType && !paths.includes(linkedType.name)) {\n                var possibleTypes = linkedType.possibleTypes || [];\n                return __spreadArray(__spreadArray([], acc, true), [\n                    gqlTypes.field(gqlTypes.name(field.name), null, null, null, gqlTypes.selectionSet(__spreadArray(__spreadArray([], buildFragments(introspectionResults)(possibleTypes), true), buildFields(introspectionResults, __spreadArray(__spreadArray([], paths, true), [\n                        linkedType.name,\n                    ], false))(linkedType.fields), true))),\n                ], false);\n            }\n            // NOTE: We might have to handle linked types which are not resources but will have to be careful about\n            // ending with endless circular dependencies\n            return acc;\n        }, []);\n    };\n};\nexport var buildFragments = function (introspectionResults) { return function (possibleTypes) {\n    return possibleTypes.reduce(function (acc, possibleType) {\n        var type = getFinalType(possibleType);\n        var linkedType = introspectionResults.types.find(function (t) { return t.name === type.name; });\n        return __spreadArray(__spreadArray([], acc, true), [\n            gqlTypes.inlineFragment(gqlTypes.selectionSet(buildFields(introspectionResults)(linkedType.fields)), gqlTypes.namedType(gqlTypes.name(type.name))),\n        ], false);\n    }, []);\n}; };\nexport var buildArgs = function (query, variables) {\n    if (query.args.length === 0) {\n        return [];\n    }\n    var validVariables = Object.keys(variables).filter(function (k) { return typeof variables[k] !== 'undefined'; });\n    var args = query.args\n        .filter(function (a) { return validVariables.includes(a.name); })\n        .reduce(function (acc, arg) { return __spreadArray(__spreadArray([], acc, true), [\n        gqlTypes.argument(gqlTypes.name(arg.name), gqlTypes.variable(gqlTypes.name(arg.name))),\n    ], false); }, []);\n    return args;\n};\nexport var buildApolloArgs = function (query, variables) {\n    if (query.args.length === 0) {\n        return [];\n    }\n    var validVariables = Object.keys(variables).filter(function (k) { return typeof variables[k] !== 'undefined'; });\n    var args = query.args\n        .filter(function (a) { return validVariables.includes(a.name); })\n        .reduce(function (acc, arg) {\n        return __spreadArray(__spreadArray([], acc, true), [\n            gqlTypes.variableDefinition(gqlTypes.variable(gqlTypes.name(arg.name)), getArgType(arg)),\n        ], false);\n    }, []);\n    return args;\n};\nexport var getArgType = function (arg) {\n    var type = getFinalType(arg.type);\n    var required = isRequired(arg.type);\n    var list = isList(arg.type);\n    if (list) {\n        if (required) {\n            return gqlTypes.listType(gqlTypes.nonNullType(gqlTypes.namedType(gqlTypes.name(type.name))));\n        }\n        return gqlTypes.listType(gqlTypes.namedType(gqlTypes.name(type.name)));\n    }\n    if (required) {\n        return gqlTypes.nonNullType(gqlTypes.namedType(gqlTypes.name(type.name)));\n    }\n    return gqlTypes.namedType(gqlTypes.name(type.name));\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { GET_LIST, GET_MANY, GET_MANY_REFERENCE } from 'ra-core';\nexport default (function (introspectionResults) { return function (raFetchMethod, resource, queryType) { return function (response) {\n    var data = response.data;\n    if (raFetchMethod === GET_LIST ||\n        raFetchMethod === GET_MANY ||\n        raFetchMethod === GET_MANY_REFERENCE) {\n        return {\n            data: response.data.items.map(sanitizeResource),\n            total: response.data.total.count,\n        };\n    }\n    return { data: sanitizeResource(data.data) };\n}; }; });\nvar sanitizeResource = function (data) {\n    var result = Object.keys(data).reduce(function (acc, key) {\n        var _a, _b, _c, _d, _e;\n        if (key.startsWith('_')) {\n            return acc;\n        }\n        var dataForKey = data[key];\n        if (dataForKey === null || dataForKey === undefined) {\n            return acc;\n        }\n        if (Array.isArray(dataForKey)) {\n            if (typeof dataForKey[0] === 'object' && dataForKey[0] !== null) {\n                return __assign(__assign({}, acc), (_a = {}, _a[key] = dataForKey.map(sanitizeResource), _a[key + \"Ids\"] = dataForKey.map(function (d) { return d.id; }), _a));\n            }\n            else {\n                return __assign(__assign({}, acc), (_b = {}, _b[key] = dataForKey, _b));\n            }\n        }\n        if (typeof dataForKey === 'object' && dataForKey !== null) {\n            return __assign(__assign(__assign({}, acc), (dataForKey &&\n                dataForKey.id && (_c = {},\n                _c[key + \".id\"] = dataForKey.id,\n                _c))), (_d = {}, _d[key] = dataForKey.__typename\n                ? sanitizeResource(dataForKey)\n                : dataForKey, _d));\n        }\n        return __assign(__assign({}, acc), (_e = {}, _e[key] = dataForKey, _e));\n    }, {});\n    return result;\n};\n","import buildVariables from './buildVariables';\nimport buildGqlQuery from './buildGqlQuery';\nimport getResponseParser from './getResponseParser';\nexport var buildQueryFactory = function (buildVariablesImpl, buildGqlQueryImpl, getResponseParserImpl) {\n    if (buildVariablesImpl === void 0) { buildVariablesImpl = buildVariables; }\n    if (buildGqlQueryImpl === void 0) { buildGqlQueryImpl = buildGqlQuery; }\n    if (getResponseParserImpl === void 0) { getResponseParserImpl = getResponseParser; }\n    return function (introspectionResults) {\n        var knownResources = introspectionResults.resources.map(function (r) { return r.type.name; });\n        var buildQuery = function (raFetchType, resourceName, params) {\n            var resource = introspectionResults.resources.find(function (r) { return r.type.name === resourceName; });\n            if (!resource) {\n                throw new Error(\"Unknown resource \" + resourceName + \". Make sure it has been declared on your server side schema. Known resources are \" + knownResources.join(', '));\n            }\n            var queryType = resource[raFetchType];\n            if (!queryType) {\n                throw new Error(\"No query or mutation matching fetch type \" + raFetchType + \" could be found for resource \" + resource.type.name);\n            }\n            var variables = buildVariablesImpl(introspectionResults)(resource, raFetchType, params, queryType);\n            var query = buildGqlQueryImpl(introspectionResults)(resource, raFetchType, queryType, variables);\n            var parseResponse = getResponseParserImpl(introspectionResults)(raFetchType, resource, queryType);\n            return {\n                query: query,\n                variables: variables,\n                parseResponse: parseResponse,\n            };\n        };\n        return buildQuery;\n    };\n};\nexport default buildQueryFactory(buildVariables, buildGqlQuery, getResponseParser);\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport merge from 'lodash/merge';\nimport buildDataProvider from 'ra-data-graphql';\nimport defaultBuildQuery from './buildQuery';\nvar defaultOptions = {\n    buildQuery: defaultBuildQuery,\n};\nexport var buildQuery = defaultBuildQuery;\nexport default (function (options) {\n    return buildDataProvider(merge({}, defaultOptions, options)).then(function (defaultDataProvider) {\n        return __assign(__assign({}, defaultDataProvider), { \n            // This provider does not support multiple deletions so instead we send multiple DELETE requests\n            // This can be optimized using the apollo-link-batch-http link\n            deleteMany: function (resource, params) {\n                var ids = params.ids, otherParams = __rest(params, [\"ids\"]);\n                return Promise.all(ids.map(function (id) {\n                    return defaultDataProvider.delete(resource, __assign({ id: id, previousData: null }, otherParams));\n                })).then(function (results) {\n                    var data = results.reduce(function (acc, _a) {\n                        var data = _a.data;\n                        return __spreadArray(__spreadArray([], acc, true), [data.id], false);\n                    }, []);\n                    return { data: data };\n                });\n            }, \n            // This provider does not support multiple deletions so instead we send multiple UPDATE requests\n            // This can be optimized using the apollo-link-batch-http link\n            updateMany: function (resource, params) {\n                var ids = params.ids, data = params.data, otherParams = __rest(params, [\"ids\", \"data\"]);\n                return Promise.all(ids.map(function (id) {\n                    return defaultDataProvider.update(resource, __assign({ id: id, data: data, previousData: null }, otherParams));\n                })).then(function (results) {\n                    var data = results.reduce(function (acc, _a) {\n                        var data = _a.data;\n                        return __spreadArray(__spreadArray([], acc, true), [data.id], false);\n                    }, []);\n                    return { data: data };\n                });\n            } });\n    });\n});\n","import { ApolloQueryResult } from '@apollo/client';\nimport buildApolloClient, {\n    buildQuery as buildQueryFactory,\n} from 'ra-data-graphql-simple';\nimport { BuildQueryFactory } from 'ra-data-graphql';\nimport { DataProvider, DELETE } from 'react-admin';\nimport gql from 'graphql-tag';\nimport { IntrospectionType } from 'graphql';\n\nconst getGqlResource = (resource: string) => {\n    switch (resource) {\n        case 'customers':\n            return 'Customer';\n\n        case 'categories':\n            return 'Category';\n\n        case 'commands':\n            return 'Command';\n\n        case 'products':\n            return 'Product';\n\n        case 'reviews':\n            return 'Review';\n\n        case 'invoices':\n            return 'Invoice';\n\n        default:\n            throw new Error(`Unknown resource ${resource}`);\n    }\n};\n\nconst customBuildQuery: BuildQueryFactory = introspectionResults => {\n    const buildQuery = buildQueryFactory(introspectionResults);\n\n    return (type, resource, params) => {\n        if (type === DELETE) {\n            return {\n                query: gql`mutation remove${resource}($id: ID!) {\n                    remove${resource}(id: $id) {\n                        id\n                    }\n                }`,\n                variables: { id: params.id },\n                parseResponse: ({ data }: ApolloQueryResult<any>) => {\n                    if (data[`remove${resource}`]) {\n                        return { data: { id: params.id } };\n                    }\n\n                    throw new Error(`Could not delete ${resource}`);\n                },\n            };\n        }\n\n        return buildQuery(type, resource, params);\n    };\n};\n\nexport default async () => {\n    const dataProvider = await buildApolloClient({\n        clientOptions: {\n            uri: 'http://localhost:4000/graphql',\n        },\n        introspection: {\n            operationNames: {\n                [DELETE]: (resource: IntrospectionType) =>\n                    `remove${resource.name}`,\n            },\n        },\n        buildQuery: customBuildQuery,\n    });\n\n    return new Proxy<DataProvider>(defaultDataProvider, {\n        get: (target, name) => {\n            if (typeof name === 'symbol' || name === 'then') {\n                return;\n            }\n            return async (resource: string, params: any) => {\n                return dataProvider[name](getGqlResource(resource), params);\n            };\n        },\n    });\n};\n// Only used to initialize proxy\nconst defaultDataProvider: DataProvider = {\n    create: () => Promise.reject({ data: null }), // avoids adding a context in tests\n    delete: () => Promise.reject({ data: null }), // avoids adding a context in tests\n    deleteMany: () => Promise.resolve({ data: [] }), // avoids adding a context in tests\n    getList: () => Promise.resolve({ data: [], total: 0 }), // avoids adding a context in tests\n    getMany: () => Promise.resolve({ data: [] }), // avoids adding a context in tests\n    getManyReference: () => Promise.resolve({ data: [], total: 0 }), // avoids adding a context in tests\n    getOne: () => Promise.reject({ data: null }), // avoids adding a context in tests\n    update: () => Promise.reject({ data: null }), // avoids adding a context in tests\n    updateMany: () => Promise.resolve({ data: [] }), // avoids adding a context in tests\n};\n"],"sourceRoot":""}